<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Jemputan Perkahwinan — Isma & Fikri</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --accent:#a67c52;
      --muted:#6b7280;
      --overlay-fade-ms:800ms;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:'Poppins',sans-serif;background:#fff;color:#111;-webkit-font-smoothing:antialiased;
      padding-bottom:calc(140px + env(safe-area-inset-bottom));
      overflow-x:hidden;
    }

    @font-face {
      font-family: 'FlashFont';
      src: url('the flash TTF.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    /* -------------------------
   Tangerine font (explicit)
   ------------------------- */
@font-face {
  font-family: 'Tangerine-Regular-Local';
  src: url('Tangerine-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Tangerine-Bold-Local';
  src: url('Tangerine-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

   /* ================================
   CINZEL DECORATIVE — REGULAR ONLY
   ================================ */
@font-face {
  font-family: 'CinzelDecorative-Regular';
  src: url('CinzelDecorative-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}


/* ensure the nama lines keep original FlashFont fallback */
.content.fullwidth .nama-vertical {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px; /* slightly tighter */
  color: #ffffff;
  text-align: center;
}

/* name lines (unchanged style but ensure fallback) */
* name lines (unchanged style but ensure fallback) */
.content.fullwidth .nama-vertical .nama {
  font-family: 'FlashFont', 'Tangerine-Regular-Local', serif;
  font-size: 50px;
  font-weight: 500;
  line-height: 1;
  color: #a67c52;
  margin: 0;
  padding: 0;
}

/* Strong, explicit rule: make the ampersand use the Tangerine-Bold file directly */
.content.fullwidth .nama-vertical .and {
  /* use the explicit bold font family so browser won't map wrong */
  font-family: 'Tangerine-Bold-Local', 'Tangerine-Regular-Local', 'Playfair Display', serif !important;
  font-weight: 700 !important;       /* safety */
  font-style: normal !important;
  font-size: 56px !important;         /* tweak if needed */
  line-height: 1 !important;
  color: #a67c52 !important;
  margin: 0 !important;
  padding: 0 !important;
  letter-spacing: 0.2px !important;
  /* keep ampersand aligned visually with names */
  transform: translateY(0px) !important;
  display: block;
}

    /* Ampersand (&) menggunakan Cinzel Decorative Regular */
.content.fullwidth .nama-vertical .and {
  font-family: 'CinzelDecorative-Regular', serif !important;
  font-weight: 400 !important;     /* Regular */
  font-size: 56px !important;      /* boleh ubah ikut suka */
  line-height: 1 !important;
  color: #a67c52 !important;
  margin: 0 !important;
  padding: 0 !important;
}





    /* ---------- FIXED BACKGROUND (paling belakang) ---------- */
    .bg-video {
      position: fixed;
      inset: 0;
      z-index: -5; /* paling belakang */
      pointer-events: none;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff; /* fallback */
      overflow: hidden;
    }
    .bg-video img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
      display: block;
    }

    /* PNG OVERLAY — di atas background tetapi kita akan mask lubang untuk .content */
    .bg-overlay {
      position: fixed;
      inset: 0;
      z-index: 9; /* DIATUR: di bawah .app (10) supaya .content sentiasa di atas overlay */
      pointer-events: none; /* jangan ganggu klik/scroll */
      background-image: url("https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/cv0005/6IHY0i1731112033501CV0005-RSVP.png");
      background-repeat: no-repeat;
      background-position: center top;
      background-size: 450px 109vh; /* lebar 450px, tinggi ikut aspect ratio */
      opacity: 1;
      mix-blend-mode: normal;
      will-change: transform, opacity;
      transition: opacity var(--overlay-fade-ms) ease;
      /* fallback visual in case mask not supported */
    }

    /* ---------- MAIN APP (scrolls above fixed bg & overlay) ---------- */
    .app{ max-width:450px; margin:auto; position:relative; min-height:100vh; scroll-snap-type:y mandatory; overflow-y:auto; -webkit-overflow-scrolling:touch; padding-bottom:140px; z-index:10; } /* z-index:10 supaya app berada di atas bg-video; overlay z:9 akan nampak di bawah content */
    section{ scroll-snap-align:start; min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; position:relative; }
    /* default content box (we'll have a fullwidth intro too) */
    .content{ background:rgba(255,255,255,0.92); backdrop-filter:blur(6px); border-radius:16px; padding:24px; box-shadow:0 8px 20px rgba(0,0,0,0.05); position:relative; z-index:11; margin:20px; max-width:420px; }

    /* ===== Fullwidth intro background + FULL SCREEN HEIGHT ===== */
    .content.fullwidth {
      position: relative;
      width: 100% !important;
      max-width: 100% !important;
      margin: 0 !important;
      /* tinggi penuh skrin */
      min-height: 100vh;
      padding: calc(env(safe-area-inset-top) + 40px) 20px 50px;
      border-radius: 0 !important;

      /* 2-layer background: PNG (top) + photo (bottom) */
      background-image:
        url("https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/cv0005/6IHY0i1731112033501CV0005-RSVP.png"),
        url("https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/fr0042/6jgvkT17552257093998.jpg");
      background-position:
        center center,
        center center;
      background-repeat:
        no-repeat,
        no-repeat;
      background-size:
        contain,
        cover;
      box-shadow: none !important;
      backdrop-filter: none !important;

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #fff;
    }

    /* ===== NAMA VERTICAL (Isma / & / Fikri) ===== */
    .content.fullwidth .nama-vertical {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      color: #ffffff;
      text-align: center;
    }

    .content.fullwidth .nama-vertical .nama {
      font-family: 'FlashFont', serif;
      font-size: 50px;
      font-weight: 500;
      line-height: 1;
      color: #a67c52;
      text-shadow: none;
    }

    .content.fullwidth .nama-vertical .and {
      font-family: 'Playfair Display', serif;
      font-size: 50px;
      font-weight: 500;
      line-height: 1;
      color: #a67c52;
      text-shadow: none;
    }

    /* remove extra spacing from .intro-text and ensure its children center */
    .content.fullwidth .intro-text {
      width: 100%;
      margin: 0;
      padding: 0;              /* padding controlled by .content.fullwidth */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 18px;               /* space between WALIMATULURUS, names, date */
    }

    /* small header */
    .content.fullwidth .kecil {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      letter-spacing: 2px;
      font-weight: 600;
      color: #1e1e1e;
      text-shadow: none;
      margin: 0;
    }

    /* date & venue */
    .content.fullwidth .tarikh,
    .content.fullwidth .lokasi {
      margin: 0;
      font-size: 15px;
      color: #c09999;
      text-shadow: none;
    }

    /* respect notch/safe-area at top — small fallback */
    @supports (padding: calc(env(safe-area-inset-top) + 40px)) {
      /* no-op - keep using calc above */
    }

    .intro-text{ position:relative; text-align:center; z-index:12; padding-top:18px; padding-bottom:18px; }
    .intro-text .kecil{ font-family:'Playfair Display',serif; font-size:18px; color:#000; margin-bottom:6px; font-weight:400 }
    .intro-text .besar{ font-family:'FlashFont',serif; font-size:40px; font-weight:700; letter-spacing:1px; line-height:1.2 }
    .intro-text .tarikh{ font-family:'Poppins',sans-serif; font-size:16px; color:#222; margin-top:10px; font-weight:500 }
    .intro-text .lokasi{ font-family:'Poppins',sans-serif; font-size:14px; color:#222; margin-top:3px; font-weight:505; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }

    .parent-name,.couple-name{ font-family:'Playfair Display',serif; font-size:18px; color:#2b2b2b; margin-bottom:8px; text-align:center; font-weight:700 }

/* Guna font Tangerine untuk heading tertentu */
h2 {
  font-family: 'Tangerine-Regular-Local', serif !important;
  font-weight: 500 !important;
  font-size: 18px !important;   /* boleh kecil/besarkan */
  color: #a67c52 !important; 
  letter-spacing: 1px;
  text-align: center;
}

    
    p{ font-size:15px; color:#222; line-height:1.6; margin-bottom:8px; text-align:center }

    .modal{ display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%; overflow:auto; background-color:rgba(0,0,0,0.8) }
    .modal-content{ margin:auto; display:block; max-width:90%; max-height:90%; border-radius:10px }
    .close{ position:absolute; top:15px; right:25px; color:white; font-size:30px; font-weight:bold; cursor:pointer }

    .countdown{ display:flex; justify-content:center; gap:8px; margin-top:12px }
    .countdown div{ background:#f1f1f1; padding:8px 10px; border-radius:8px; min-width:54px }
    .countdown .num{ font-weight:700; font-size:16px }
    .countdown .lbl{ font-size:11px; color:var(--muted) }

    footer{ font-size:12px; color:var(--muted); margin-top:20px; text-align:center }

    /* bottom bar */
    .bottom-bar{ position:fixed; left:50%; transform:translateX(-50%); bottom:10px; z-index:10050; width:calc(100% - 40px); max-width:420px; background:rgba(0,0,0,0.75); border-radius:14px; padding:8px 12px; box-shadow:0 6px 20px rgba(0,0,0,0.12); display:flex; gap:12px; align-items:center; justify-content:space-around; overflow:visible; padding-bottom:calc(10px + env(safe-area-inset-bottom)); }
    .bottom-bar .icon-btn{ display:flex; flex-direction:column; align-items:center; justify-content:center; background:transparent; color:#fff; font-size:18px; text-decoration:none; gap:4px; cursor:pointer; overflow:visible; }
    .bottom-bar .icon-btn i{ color:#fff; font-size:18px }
    .bottom-bar .icon-btn span{ font-size:11px; color:#fff; line-height:1 }

    /* ensure contact-card sits above bottom-bar */
    .contact-card{ display:none; position:fixed; left:50%; transform:translateX(-50%); bottom:80px; z-index:10070; width:calc(100% - 40px); max-width:320px; background:#e8dcc6; border-radius:18px; padding:22px; box-shadow:0 10px 30px rgba(0,0,0,0.12) }
    .contact-card h3{ text-align:center; margin-bottom:8px; font-family:'Playfair Display',serif; font-size:20px; color:#1f1f1f }
    .contact-list{ margin-top:8px }
    .contact-row{ display:flex; align-items:center; justify-content:space-between; padding:12px 6px; border-radius:10px }
    .contact-info{ display:flex; flex-direction:column }
    .contact-info .name{ font-size:16px; font-weight:600; color:#111 }
    .contact-info .role{ font-size:13px; font-style:italic; color:#6b5f50 }
    .contact-actions{ display:flex; gap:12px; align-items:center }
    .contact-actions a{ display:inline-flex; align-items:center; justify-content:center; width:44px; height:44px; border-radius:8px; background:var(--accent); border:none; text-decoration:none; color:#fff }

    @media (max-width:420px){ .contact-card{ width:calc(100% - 28px); padding:16px } }

    .bubbles{ display:flex; flex-direction:column; gap:8px; margin:12px 0; max-height:300px; overflow-y:auto; padding-right:4px; scroll-behavior:smooth }
    .bubble{ align-self:flex-start; background:#fff4e9; border:1px solid #f0e1cf; padding:10px 14px; border-radius:18px; max-width:90%; box-shadow:0 6px 12px rgba(0,0,0,0.06); }
    .bubble .meta{ font-size:12px; color:var(--muted); margin-bottom:6px; font-weight:600 }
    .bubble .msg{ font-size:14px; color:#222; line-height:1.4 }

    .map-popup iframe{ width:100%; height:60vh; max-height:760px; border:none; border-radius:10px; margin-top:8px }
    @media (max-width:420px){ .map-popup iframe{ height:65vh; max-height:820px } }
    .map-popup{ display:none; position:fixed; z-index:10065 }

    .bubbles::-webkit-scrollbar { width: 6px; }
    .bubbles::-webkit-scrollbar-thumb { background: #d1c3aa; border-radius: 3px; }
    .bubbles::-webkit-scrollbar-track { background: transparent; }

    /* photo slider styles (mobile-friendly) */
    .photo-slider{ width:100%; max-width:360px; margin:12px auto; overflow:hidden; border-radius:12px; position:relative; }
    .photo-slider .slides{ display:flex; transition:transform 400ms ease; will-change:transform; }
    .photo-slider .slide-item{ min-width:100%; flex:0 0 100%; display:flex; align-items:center; justify-content:center; height:200px; }
    .photo-slider .slide-item img{ width:100%; height:100%; object-fit:cover; border-radius:12px; display:block; cursor:pointer; }
    .slider-dots{ display:flex; gap:6px; justify-content:center; margin-top:8px; }
    .slider-dots button{ width:8px; height:8px; border-radius:50%; border:none; background:#ddd; padding:0; }
    .slider-dots button.active{ background:var(--accent); }

    /* slider arrow buttons */
    .slider-btn{ position:absolute; top:50%; transform:translateY(-50%); width:36px; height:36px; border-radius:50%; border:none; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.45); color:#fff; font-size:22px; cursor:pointer; z-index:3; }
    .slider-btn.prev{ left:8px; }
    .slider-btn.next{ right:8px; }
    .slider-btn:active{ transform:translateY(-50%) scale(0.96); }

    @media (max-width:420px){
      .photo-slider .slide-item{ height:180px; }
      .slider-btn{ width:32px; height:32px; font-size:18px; }
    }

    /* ============================
       MAWADDAH-STYLE OPENING OVERLAY
       ============================ */
    /* sync door anim var with JS DOOR_ANIM_MS (set to 2500ms below) */
   :root { --door-ms: 2500ms; } /* mirrors DOOR_ANIM_MS in JS, adjust if needed */ #openingOverlay { position: fixed; inset: 0; z-index: 10060; /* topmost while visible */ display: flex; align-items: center; justify-content: center; background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.55)); -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); transition: opacity var(--overlay-fade-ms) ease; pointer-events: auto; } #openingOverlay.fade-out { opacity:0; pointer-events:none; } .glass-panel { position: absolute; top: 0; height: 100vh; width: 50vw; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); backdrop-filter: blur(8px) saturate(1.05); transition: transform 2500ms cubic-bezier(.22,.9,.2,1), opacity 600ms ease; will-change: transform; z-index:10061; } .glass-left { left: 0; transform: translateX(0); } .glass-right { right: 0; transform: translateX(0); } /* when body has opening-opened class, slide panels away */ body.opening-opened .glass-left { transform: translateX(-110%); opacity:0.98; } body.opening-opened .glass-right { transform: translateX(110%); opacity:0.98; } .opening-seal { width: 140px; height: 140px; background: rgba(255,255,255,0.95); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: "Playfair Display", serif; font-size: 34px; color: #3c4928; z-index: 10070; box-shadow: 0 14px 40px rgba(0,0,0,0.28); transition: transform 1000ms ease, opacity 1000ms ease; } body.opening-opened .opening-seal { transform: scale(0.6); opacity:0; } /* fallback rules for small screens */ @media (max-width:420px){ .opening-seal { width:110px; height:110px; font-size:26px; } .glass-panel { width:52vw; } }


    /* ===== Compact popup styles (RSVP / Ucapan) ===== */
    .map-popup.compact {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 90px;
      background: #e8dcc6;
      color: #222;
      padding: 12px;
      border-radius: 12px;
      width: calc(100% - 40px);
      max-width: 320px;   /* <-- adjust here to make popups smaller/larger */
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      z-index: 10080;
    }

    @media (max-width: 360px){
      .map-popup.compact { max-width: 300px; padding:10px; bottom:100px; }
      .bottom-bar { padding:6px 10px; }
    }

  </style>
</head>
<body>
  <!-- Fixed background -->
  <div class="bg-video" aria-hidden="true">
    <img src="https://invitation-v2.mymawaddah.com/storage/wedapp-invitation/design/fr0042/6jgvkT17552257093998.jpg" alt="Wedding Background" />
  </div>

  <!-- PNG overlay (fixed). Mask telah dibuang — overlay kini berada di bawah .app berdasarkan z-index -->
  <div class="bg-overlay" aria-hidden="true"></div>

  <!-- NEW: Mawaddah-style opening overlay -->
  <div id="openingOverlay" role="dialog" aria-label="Skrin Muka" aria-modal="true">
    <div class="glass-panel glass-left" aria-hidden="true"></div>
    <div class="glass-panel glass-right" aria-hidden="true"></div>
    <div class="opening-seal" id="openingSeal" aria-hidden="true">I|F</div>
  </div>

  <!-- MAIN SCROLLING CONTENT -->
  <div class="app" id="appRoot" aria-hidden="false">
    <!-- INTRO: fullwidth content panel (UPDATED) -->
    <section>
      <div class="content fullwidth" id="introCard" aria-hidden="false">

<!-- REPLACE the intro-text block with this -->
<div class="intro-text">
  <div class="kecil">WALIMATULURUS</div><br>

  <div class="nama-vertical" aria-hidden="false">
    <div class="nama">Isma</div>
    <div class="and" aria-hidden="true">&amp;</div><br>
    <div class="nama">Fikri</div><br><br>
  </div>

  <div class="tarikh">03 JANUARI 2026 | SABTU</div>
  <div class="lokasi">WHITE HOUSE EVENT SPACE, DUNGUN</div>
</div>

        
      </div>
    </section>

    <section>
      <div id="mainCard" aria-hidden="false" style="background:transparent; box-shadow:none; border-radius:16px; margin:20px; max-width:420px; z-index:11; position:relative;">
        
        <!-- HEADER IMAGE + TEXT DOA -->
      <div style="text-align:center; margin-bottom:12px;">
      <img src="https://storage.googleapis.com/wedapp-invitation/common/page2_header/4_nw.png"
       alt=""
       style="width:250px; max-width:100%; height:auto; margin-bottom:10px;">
      </div>
        
        <p style="text-align:center; line-height:1.6;">
        Assalamualaikum &amp; Selamat Sejahtera.<br>
        Dengan Nama Allah yang Maha Pengasih <br>
        Lagi Maha Penyayang
        </p>
        
        <div class="parent-name"><strong>HJ. MOHD SHUHAIMI BIN DAUD</strong></div>
        <div class="parent-name"><strong>&amp;</strong></div>
        <div class="parent-name"><strong>HJH. NOR AZILA BINTI RAMLI</strong></div>
        <p>Dengan penuh kesyukuran kami menjemput,<br>Dato’ | Datin | Tuan | Puan | Encik | Cik<br>ke majlis perkahwinan puteri kami</p><br>
        <div class="couple-name"><strong>SITI ISMAHANI IZZATI <br> BINTI MOHD SHUHAIMI</strong></div>
        <div class="parent-name"><strong>&amp;</strong></div>
        <div class="couple-name"><strong>MUHAMMAD FIKRI BIN ZUHAIRI</strong></div>

        <h2>Butiran Majlis</h2>
        <p><strong>Tarikh:</strong> Sabtu, 03 Januari 2026<br><strong>Masa:</strong> 11:00 pagi - 4:00 petang<br><strong>Tempat:</strong> White House Event Space Dungun</p>

        <h2>Atur Cara</h2>
        <p><strong>Jamuan:</strong> 11.00 AM – 4.00 PM<br><strong>Ketibaan Pengantin:</strong> 12.00 PM</p>

        <h2>#IsmaUntukFikri</h2>
        <div class="photo-slider" aria-label="Galeri Gambar">
          <button class="slider-btn prev" aria-label="Sebelum">‹</button>
          <div class="slides">
            <div class="slide-item"><img src="https://i.postimg.cc/C5BpCwGw/Whats-App-Image-2025-11-08-at-7-40-37-PM.jpg" alt="Foto 1" loading="lazy" decoding="async"></div>
            <div class="slide-item"><img src="https://i.postimg.cc/RVtzNVCT/Whats-App-Image-2025-11-08-at-7-42-44-PM.jpg" alt="Foto 2" loading="lazy" decoding="async"></div>
            <div class="slide-item"><img src="https://i.postimg.cc/d11QFp8X/Whats-App-Image-2025-11-15-at-00-08-23.jpg" alt="Foto 3" loading="lazy"></div>
          </div>
          
          <button class="slider-btn next" aria-label="Seterusnya">›</button>
          <div class="slider-dots" aria-hidden="true"></div>
        </div>

        <div id="imageModal" class="modal" aria-hidden="true">
          <span class="close" id="imageModalClose" role="button" aria-label="Tutup">&times;</span>
          <img class="modal-content" id="modalImg" alt="Preview" />
        </div>

        <h2>Ucapan</h2>
        <div class="bubbles" id="bubblesContainer" tabindex="0" aria-live="polite" aria-label="Senarai ucapan"></div>

        <h2>Menghitung Hari</h2>
        <div class="countdown" id="countdown">
          <div><div class="num" id="days">0</div><div class="lbl">Hari</div></div>
          <div><div class="num" id="hours">0</div><div class="lbl">Jam</div></div>
          <div><div class="num" id="mins">0</div><div class="lbl">Minit</div></div>
          <div><div class="num" id="secs">0</div><div class="lbl">Saat</div></div>
        </div>

        <!-- ====== Video player: autoplay (muted) placed under countdown ====== -->
        <div id="videoContainer" style="margin-top:12px;text-align:center;">
          <div id="ytPlayer" style="width:100%;max-width:420px;margin:auto;height:200px;"></div>
        </div>
        <!-- ================================================================== -->

        <footer>Terima kasih — Kami hargai kehadiran dan doa anda.</footer>
      </div>
    </section>
  </div>

  <!-- contact card -->
  <div class="contact-card" id="contactCard" role="dialog" aria-label="contact">
    <h3>CONTACT</h3>
    <div class="contact-list">
      <div class="contact-row">
        <div class="contact-info"><div class="name">Hj. Shuhaimi</div><div class="role">Bapa</div></div>
        <div class="contact-actions"><a href="https://wa.me/+60199150821" target="_blank" rel="noopener noreferrer" aria-label="whatsapp"><i class="fa-brands fa-whatsapp"></i></a><a href="tel:+60199150821" aria-label="call"><i class="fa-solid fa-phone"></i></a></div>
      </div>
      <div class="contact-row">
        <div class="contact-info"><div class="name">Syafiq</div><div class="role">Abang</div></div>
        <div class="contact-actions"><a href="https://wa.me/+60104070205" target="_blank" rel="noopener noreferrer" aria-label="whatsapp"><i class="fa-brands fa-whatsapp"></i></a><a href="tel:+60104070205" aria-label="call"><i class="fa-solid fa-phone"></i></a></div>
      </div>
      <div class="contact-row">
        <div class="contact-info"><div class="name">Amalina</div><div class="role">Kakak</div></div>
        <div class="contact-actions"><a href="https://wa.me/+601137426966" target="_blank" rel="noopener noreferrer" aria-label="whatsapp"><i class="fa-brands fa-whatsapp"></i></a><a href="tel:+601137426966" aria-label="call"><i class="fa-solid fa-phone"></i></a></div>
      </div>
    </div>
  </div>

  <!-- bottom bar -->
  <div class="bottom-bar" role="navigation" aria-label="tindakan">
    <div class="icon-btn" id="callBtn"><i class="fa-solid fa-phone"></i><span>Hubungi</span></div>

    <div class="icon-btn" id="mapBtn">
      <i class="fa-solid fa-location-dot"></i><span>Lokasi</span>
      <div class="map-popup" id="mapPopup" style="display:none;position:absolute;bottom:70px;left:50%;transform:translateX(-50%);background:#e8dcc6;color:#222;padding:12px;border-radius:12px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.12);">
        <h4 style="margin:0 0 6px;font-family:'Playfair Display',serif;color:#1f1f1f">Lokasi</h4>
        <p style="margin:0 0 10px;font-size:14px;color:#6b5f50">White House Event Space, Dungun</p>
        <a href="https://maps.app.goo.gl/Z2F3c86dVen1ciR29" target="_blank" rel="noopener noreferrer" style="display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;text-decoration:none;padding:8px;border-radius:8px;margin:6px auto;max-width:200px;gap:8px"><i class="fa-solid fa-map-location-dot"></i><span>Google Maps</span></a>
        <a href="https://ul.waze.com/ul?venue_id=67764271.677839321.39155974" target="_blank" rel="noopener noreferrer" style="display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;text-decoration:none;padding:8px;border-radius:8px;margin:6px auto;max-width:200px;gap:8px"><i class="fa-brands fa-waze"></i><span>Waze</span></a>
      </div>
    </div>

    <div class="icon-btn" id="bottomRsvpBtn"><i class="fa-regular fa-envelope"></i><span>RSVP</span></div>
  </div>

  <!-- popup small for RSVP choices -->
  <div id="popupRsvp" class="map-popup compact" style="display:none;">
    <h4 style="margin:0 0 6px;font-family:'Playfair Display',serif;color:#1f1f1f">RSVP</h4>
    <p style="margin:0 0 10px;font-size:14px;color:#6b5f50">Pilih tindakan untuk RSVP atau hantarkan ucapan.</p>
    <a id="openExternalRsvp" href="#" style="display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;text-decoration:none;padding:8px;border-radius:8px;margin:6px auto;max-width:200px;gap:8px"><i class="fa-solid fa-clipboard-list"></i><span>Isi RSVP</span></a>
    <a id="openUcapan" href="#" style="display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;text-decoration:none;padding:8px;border-radius:8px;margin:6px auto;max-width:200px;gap:8px"><i class="fa-solid fa-pencil"></i><span>Hantar Ucapan</span></a>
  </div>

  <!-- popup iframe RSVP (uses form POST via hidden iframe to avoid CORS preflight) -->
  <div id="popupRsvpIframe" class="map-popup compact" style="display:none;">
    <h4 style="margin:0 0 6px;font-family:'Playfair Display',serif;color:#1f1f1f">Isi RSVP</h4>
    <p style="margin:0 0 10px;font-size:14px;color:#6b5f50">Sila lengkapkan borang di bawah.</p>
    <button id="closeRsvpIframe" aria-label="Tutup" style="position:absolute;top:10px;right:12px;background:transparent;border:none;font-size:20px;color:#333;cursor:pointer;z-index:10001">&times;</button>

    <form id="rsvpInlineForm" style="display:flex;flex-direction:column;gap:8px;margin-top:6px;">
      <input id="rsvp_nama" name="nama" type="text" placeholder="Nama penuh" required style="padding:10px;border-radius:8px;border:1px solid #ddd;font-size:14px" />
      <input id="rsvp_jumlah" name="jumlah" type="number" min="1" placeholder="Bilangan ahli (cth: 2)" value="1" required style="padding:10px;border-radius:8px;border:1px solid #ddd;font-size:14px" />
      <div style="display:flex;gap:8px;justify-content:center;margin-top:4px">
        <label style="display:flex;align-items:center;gap:6px"><input type="radio" name="hadir" value="Hadir" checked /> Hadir</label>
        <label style="display:flex;align-items:center;gap:6px"><input type="radio" name="hadir" value="Tidak Hadir" /> Tidak Hadir</label>
      </div>

      <button id="rsvpSubmit" type="submit" class="btn" style="margin-top:6px;background:var(--accent);color:#fff;padding:10px 12px;border-radius:10px;border:none">Hantar RSVP</button>
    </form>

    <div id="rsvpStatus" style="margin-top:8px;font-size:13px;color:#333;display:none"></div>
  </div>

  <!-- ucapan form -->
  <div id="ucapanForm" class="map-popup compact" aria-label="ucapan" style="display:none;">
    <h4 style="margin:0 0 6px;font-family:'Playfair Display',serif;color:#1f1f1f">Hantar Ucapan</h4>
    <p style="margin:0 0 10px;font-size:14px;color:#6b5f50">Tulis nama dan ucapan anda untuk Isma &amp; Fikri.</p>
    <button id="closeUcapanBtn" aria-label="Tutup" style="position:absolute;top:10px;right:12px;background:transparent;border:none;font-size:20px;color:#333;cursor:pointer;z-index:10001">&times;</button>
    <input id="ucap_name" type="text" placeholder="Nama anda" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;margin-bottom:8px">
    <textarea id="ucap_text" placeholder="Ucapan untuk Isma & Fikri" rows="3" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;margin-bottom:8px"></textarea>
    <a id="submitUcapan" href="#" style="display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;text-decoration:none;padding:8px;border-radius:8px;margin:6px auto;max-width:200px;gap:8px">Hantar</a>
    <div id="ucapanStatus" style="margin-top:8px;font-size:13px;color:#333;display:none"></div>
  </div>

  <!-- hidden iframe for form POST -->
  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

<script>
(function(){
  // ------------- CONFIG -------------
  const RSVP_WS_URL = 'https://script.google.com/macros/s/AKfycbzDYI9RXDgtm0E6Li32k8tpsgzYn9WKA3JATB5UUdNbd2cxXLLUM6ARSliRikx-Cx4d/exec';
  const UCAPAN_WS_URL = 'https://script.google.com/macros/s/AKfycbzDYI9RXDgtm0E6Li32k8tpsgzYn9WKA3JATB5UUdNbd2cxXLLUM6ARSliRikx-Cx4d/exec';

  // Auto-enter + timing settings (ubah ikut citarasa)
  const AUTO_ENTER = true;
  const OVERLAY_SHOW_MS = 1200;
  const AUTO_ENTER_DELAY_MS = 0;
  const DOOR_ANIM_MS = 2500; // <-- padankan dengan CSS --door-anim-ms
  const OVERLAY_FADE_MS = 800;

  document.documentElement.style.setProperty('--overlay-fade-ms', OVERLAY_FADE_MS + 'ms');

  // ---------- helpers ----------
  function escapeHtml(s){ if (typeof s !== 'string') return s||''; return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;'); }
  function showStatus(el, msg, ok){ if(!el) return; el.style.display='block'; el.textContent = msg; el.style.color = ok ? '#0a7a00' : '#b21b1b'; }

  // ---------- Image modal ----------
  const images = document.querySelectorAll('.photo-slider img');
  const imageModal = document.getElementById('imageModal');
  const modalImg = document.getElementById('modalImg');
  const imageModalClose = document.getElementById('imageModalClose');
  if(images && images.forEach){
    images.forEach(function(img){ img.addEventListener('click', function(){ if(imageModal && modalImg){ modalImg.src = img.src; imageModal.style.display='block'; imageModal.setAttribute('aria-hidden','false'); } }); });
  }
  if(imageModalClose) imageModalClose.addEventListener('click', function(){ if(imageModal){ imageModal.style.display='none'; imageModal.setAttribute('aria-hidden','true'); } });
  window.addEventListener('click', function(ev){ if(ev.target === imageModal) { imageModal.style.display='none'; imageModal.setAttribute('aria-hidden','true'); } });

  // ---------- bottom bar behaviour ----------
  const callBtn = document.getElementById('callBtn');
  const mapBtn = document.getElementById('mapBtn');
  const bottomRsvpBtn = document.getElementById('bottomRsvpBtn');
  const contactCard = document.getElementById('contactCard');
  const mapPopup = document.getElementById('mapPopup');
  const popupRsvp = document.getElementById('popupRsvp');
  const popupRsvpIframe = document.getElementById('popupRsvpIframe');
  const ucapanForm = document.getElementById('ucapanForm');

  function hideAllPopups(){ [contactCard,mapPopup,popupRsvp,popupRsvpIframe,ucapanForm].forEach(e=>{ if(e) e.style.display='none'; e && e.setAttribute && e.setAttribute('aria-hidden','true'); }); }

  if(callBtn) callBtn.addEventListener('click', function(e){ e.stopPropagation(); hideAllPopups(); contactCard.style.display = (contactCard.style.display==='block')? 'none':'block'; contactCard.setAttribute('aria-hidden', contactCard.style.display==='none'); });
  if(mapBtn) mapBtn.addEventListener('click', function(e){ e.stopPropagation(); hideAllPopups(); mapPopup.style.display = (mapPopup.style.display==='block')? 'none':'block'; mapPopup.setAttribute('aria-hidden', mapPopup.style.display==='none'); });
  if(bottomRsvpBtn) bottomRsvpBtn.addEventListener('click', function(e){ e.stopPropagation(); hideAllPopups(); popupRsvp.style.display = (popupRsvp.style.display==='block')? 'none':'block'; popupRsvp.setAttribute('aria-hidden', popupRsvp.style.display==='none'); });

  document.addEventListener('click', function(e){
    const popupEls = [contactCard,mapPopup,popupRsvp,popupRsvpIframe,ucapanForm];
    let inside=false;
    popupEls.forEach(p=>{ if(p && p.contains && p.contains(e.target)) inside=true; });
    const btns=[callBtn,mapBtn,bottomRsvpBtn];
    btns.forEach(b=>{ if(b && (b===e.target || b.contains(e.target))) inside=true; });
    if(!inside) hideAllPopups();
  });

  // open external rsvp iframe & ucapan toggles
  const openExternalRsvp = document.getElementById('openExternalRsvp');
  const openUcapanBtn = document.getElementById('openUcapan');
  if(openExternalRsvp) openExternalRsvp.addEventListener('click', function(e){ e.preventDefault(); e.stopPropagation(); popupRsvp.style.display='none'; popupRsvpIframe.style.display = (popupRsvpIframe.style.display==='block')? 'none':'block'; popupRsvpIframe.setAttribute('aria-hidden', popupRsvpIframe.style.display==='none'); const el = document.getElementById('rsvp_nama'); if(el) el.focus(); });
  if(openUcapanBtn) openUcapanBtn.addEventListener('click', function(e){ e.preventDefault(); e.stopPropagation(); popupRsvp.style.display='none'; ucapanForm.style.display = (ucapanForm.style.display==='block')? 'none':'block'; ucapanForm.setAttribute('aria-hidden', ucapanForm.style.display==='none'); const el = document.getElementById('ucap_name'); if(el) el.focus(); });

  // close popup buttons
  const closeRsvpIframe = document.getElementById('closeRsvpIframe');
  if(closeRsvpIframe) closeRsvpIframe.addEventListener('click', function(e){ e.stopPropagation(); popupRsvpIframe.style.display = 'none'; popupRsvpIframe.setAttribute('aria-hidden','true'); });

  const closeUcapanBtn = document.getElementById('closeUcapanBtn');
  if(closeUcapanBtn) closeUcapanBtn.addEventListener('click', function(e){ e.stopPropagation(); ucapanForm.style.display = 'none'; ucapanForm.setAttribute('aria-hidden','true'); });

  // ---------- JSONP loader for ucapan list ----------
  const bubblesContainer = document.getElementById('bubblesContainer');
  window.__ucapan_jsonp_cb = function(data){
    try {
      if(!data || !Array.isArray(data.items)) return;
      renderUcapanList(data.items);
    } catch(e){ console.warn('jsonp cb error', e); }
  };

  function loadUcapan_JSONP_thenRender(){
    const cbName = '__ucapan_jsonp_cb';
    const src = UCAPAN_WS_URL + (UCAPAN_WS_URL.indexOf('?') === -1 ? '?' : '&') + 'api=ucapan&callback=' + cbName + '&_=' + Date.now();
    const s = document.createElement('script');
    s.src = src;
    s.onerror = function(){ console.warn('JSONP load error for', src); s.remove(); };
    document.body.appendChild(s);
    setTimeout(()=>{ try{ document.body.removeChild(s); }catch(e){} }, 9000);
  }

  function renderUcapanList(items){
    try {
      bubblesContainer.innerHTML = '';
      let arr = Array.from(items || []);
      try {
        if(arr.length >= 2){
          const a = new Date(arr[0].timestamp || arr[0].Timestamp || arr[0].ts || 0);
          const b = new Date(arr[arr.length-1].timestamp || arr[arr.length-1].Timestamp || arr[arr.length-1].ts || 0);
          if(!isNaN(a) && !isNaN(b) && a < b) arr = arr.reverse();
        }
      } catch(e){ /* ignore */ }

      arr.forEach(it => {
        const nama = it.nama || it.Nama || it.name || '';
        const ucapan = it.ucapan || it.Ucapan || it.message || '';
        const ts = it.timestamp || it.Timestamp || it.ts || '';
        const bubble = document.createElement('div'); bubble.className='bubble';
        const timeLabel = ts ? (new Date(ts)).toLocaleString() : (new Date()).toLocaleString();
        bubble.innerHTML = '<div class=\"meta\">'+escapeHtml(nama)+' • <span style=\"font-size:11px;color:#999\">'+escapeHtml(timeLabel)+'</span></div><div class=\"msg\">'+escapeHtml(ucapan)+'</div>';
        bubblesContainer.appendChild(bubble);
      });

      setTimeout(()=>{ try{ bubblesContainer.scrollTo({ top: 0, behavior:'smooth' }); }catch(e){} }, 60);
    } catch(e){ console.warn('renderUcapanList error', e); }
  }

  // initial load
  loadUcapan_JSONP_thenRender();

  function postFormNoCORS(url, data, callback) {
    try {
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = url;
      form.target = 'hidden_iframe';
      form.style.display = 'none';

      for (const k in data){
        const inp = document.createElement('input');
        inp.type = 'hidden';
        inp.name = k;
        inp.value = data[k];
        form.appendChild(inp);
      }
      document.body.appendChild(form);

      const iframe = document.getElementById('hidden_iframe');
      let called = false;

      function onLoad(){
        if (called) return;
        called = true;
        try { iframe.removeEventListener('load', onLoad); } catch(e){}
        setTimeout(()=>{ 
          if(callback) callback(true); 
          try{ document.body.removeChild(form); }catch(e){} 
        }, 150);
      }

      iframe.addEventListener('load', onLoad);
      form.submit();

      setTimeout(()=>{ 
        if (called) return;
        called = true;
        try{ iframe.removeEventListener('load', onLoad);}catch(e){}
        if(callback) callback(false);
        try{ document.body.removeChild(form); }catch(e){}
      }, 4000);
    } catch(err){
      console.warn('postFormNoCORS error', err);
      if(callback) callback(false);
    }
  }

  // ---------- RSVP submit (uses postFormNoCORS) ----------
  const rsvpForm = document.getElementById('rsvpInlineForm');
  const rsvpStatus = document.getElementById('rsvpStatus');
  if (rsvpForm){
    rsvpForm.addEventListener('submit', function(e){
      e.preventDefault();
      rsvpStatus.style.display='none';

      const nama = document.getElementById('rsvp_nama').value.trim();
      const jumlah = document.getElementById('rsvp_jumlah').value.trim();
      const hadir = rsvpForm.querySelector('input[name="hadir"]:checked').value;

      if(!nama || !jumlah){
        showStatus(rsvpStatus, 'Sila lengkapkan nama & jumlah.', false);
        return;
      }

      showStatus(rsvpStatus, 'RSVP dihantar. Terima kasih!', true);
      rsvpForm.reset();
      setTimeout(()=>{ popupRsvpIframe.style.display='none'; popupRsvpIframe.setAttribute('aria-hidden','true'); }, 600);

      const payload = { nama, jumlah, hadir, type:'rsvp' };
      postFormNoCORS(RSVP_WS_URL, payload, function(ok){
        if(!ok){
          showStatus(rsvpStatus, 'Server gagal sahkan RSVP. Cuba semula.', false);
        }
      });
    });
  }

  // ---------- Ucapan submit ----------
  const submitUcapan = document.getElementById('submitUcapan');
  const ucapanStatus = document.getElementById('ucapanStatus');
  if(submitUcapan){
    submitUcapan.addEventListener('click', function(e){
      e.preventDefault();
      const nameEl = document.getElementById('ucap_name');
      const textEl = document.getElementById('ucap_text');
      const name = nameEl ? nameEl.value.trim() : '';
      const text = textEl ? textEl.value.trim() : '';
      if(!name || !text){ showStatus(ucapanStatus, 'Sila isi nama dan ucapan.', false); return; }

      // optimistic bubble (insert at top)
      try {
        const tsNow = new Date().toISOString();
        const container = document.getElementById('bubblesContainer');
        const bubble = document.createElement('div'); bubble.className = 'bubble';
        bubble.innerHTML = '<div class=\"meta\">'+escapeHtml(name)+' • <span style=\"font-size:11px;color:#999\">'+(new Date(tsNow)).toLocaleString()+'</span></div><div class=\"msg\">'+escapeHtml(text)+'</div>';
        if(container) container.insertBefore(bubble, container.firstChild);
        setTimeout(()=>{ try{ container.scrollTo({ top: 0, behavior:'smooth' }); }catch(e){} }, 40);
      } catch(e){ console.warn(e); }

      const payload = { nama: name, ucapan: text, timestamp: new Date().toISOString(), type: 'ucapan' };
      postFormNoCORS(UCAPAN_WS_URL, payload, function(ok){
        if(ok){
          showStatus(ucapanStatus, 'Ucapan dihantar dan disimpan.', true);
          setTimeout(loadUcapan_JSONP_thenRender, 350);
        } else {
          showStatus(ucapanStatus, 'Ucapan dipaparkan tetapi tidak dapat disahkan oleh server.', false);
        }
      });

      if(nameEl) nameEl.value='';
      if(textEl) textEl.value='';
      if(ucapanForm) ucapanForm.style.display='none';
    });
  }

  // ---------- countdown ----------
  function pad(n){ return String(n).padStart(2,'0'); }
  const eventDate = new Date('2026-01-03T11:00:00+08:00');
  function updateCountdown(){
    const now = new Date();
    let diff = Math.max(0, Math.floor((eventDate - now) / 1000));
    const days = Math.floor(diff / 86400); diff %= 86400;
    const hours = Math.floor(diff / 3600); diff %= 3600;
    const mins = Math.floor(diff / 60); const secs = diff % 60;
    const daysEl = document.getElementById('days');
    const hoursEl = document.getElementById('hours');
    const minsEl = document.getElementById('mins');
    const secsEl = document.getElementById('secs');
    if(daysEl) daysEl.textContent = days;
    if(hoursEl) hoursEl.textContent = pad(hours);
    if(minsEl) minsEl.textContent = pad(mins);
    if(secsEl) secsEl.textContent = pad(secs);
  }
  updateCountdown();
  setInterval(updateCountdown, 1000);

  // ---------- NEW: OPENING OVERLAY FLOW (robust) ----------
  (function openingFlow(){
    const openingOverlay = document.getElementById('openingOverlay');
    const app = document.getElementById('appRoot');

    document.documentElement.style.overflow = 'hidden';
    document.body.style.overflow = 'hidden';
    if (app) app.setAttribute('aria-hidden','true');

    function kickoff(){
      // add class to trigger CSS transitions
      document.body.classList.add('opening-opened');

      if (openingOverlay) {
        openingOverlay.style.pointerEvents = 'none';
        openingOverlay.classList.add('fade-out');
      }

      // restore scrolling for page content
      document.documentElement.style.overflow = '';
      document.body.style.overflow = '';
      if (app) app.setAttribute('aria-hidden','false');

      // remove overlay after animations finished
      const safeRemoveDelay = Math.max(DOOR_ANIM_MS, OVERLAY_FADE_MS) + 120;
      setTimeout(()=>{ try{ openingOverlay && openingOverlay.remove(); }catch(e){} }, safeRemoveDelay);
    }

    if (AUTO_ENTER) {
      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        setTimeout(kickoff, OVERLAY_SHOW_MS + AUTO_ENTER_DELAY_MS);
      } else {
        window.addEventListener('load', ()=> setTimeout(kickoff, OVERLAY_SHOW_MS + AUTO_ENTER_DELAY_MS), { once:true });
        document.addEventListener('DOMContentLoaded', ()=> setTimeout(kickoff, OVERLAY_SHOW_MS + AUTO_ENTER_DELAY_MS), { once:true });
      }
    } else {
      if(openingOverlay) openingOverlay.addEventListener('click', kickoff, { once:true });
    }

    window.forceEnter = kickoff;
  })();

  // --- YouTube autoplay (muted) + unmute on user gesture ---
  (function(){
    if(!document.getElementById('yt-iframe-api')){
      const s = document.createElement('script');
      s.id = 'yt-iframe-api';
      s.src = "https://www.youtube.com/iframe_api";
      document.head.appendChild(s);
    }
    window.ytPlayer = null;
    window.onYouTubeIframeAPIReady = function(){
      try {
        window.ytPlayer = new YT.Player('ytPlayer', {
          height: '200',
          width: '100%',
          videoId: 'JmIUdR_fob0',
          playerVars: { autoplay: 1, controls: 1, rel: 0, modestbranding: 1, playsinline: 1, mute: 1 },
          events: {
            onReady: function(e){ try { e.target.playVideo(); } catch(err){ console.warn('play error', err); } }
          }
        });
      } catch(e){ console.warn('YT player error', e); }
    };

    function tryUnmute(){
      try {
        if(window.ytPlayer && typeof window.ytPlayer.unMute === 'function'){
          window.ytPlayer.unMute();
          window.ytPlayer.playVideo();
        }
      } catch(e){ console.warn('unmute failed', e); }
      window.removeEventListener('click', tryUnmute);
      window.removeEventListener('touchstart', tryUnmute);
    }
    window.addEventListener('click', tryUnmute, { once: true });
    window.addEventListener('touchstart', tryUnmute, { once: true });
  })();

  // ===== photo slider JS (auto + touch + arrows + dots) =====
  (function(){
    try{
      const container = document.querySelector('.photo-slider');
      if(!container) return;
      const slider = container.querySelector('.slides');
      const prevBtn = container.querySelector('.slider-btn.prev');
      const nextBtn = container.querySelector('.slider-btn.next');
      const slides = slider.children;
      const total = slides.length;
      const dots = container.querySelector('.slider-dots');
      let idx = 0;
      let autoT = null;
      let animBlocked = false;

      // build dots
      for(let i=0;i<total;i++){
        const b = document.createElement('button');
        b.type = 'button';
        b.addEventListener('click', ()=>{ go(i); });
        dots.appendChild(b);
      }

      function updateDots(){ Array.from(dots.children).forEach((b,i)=>b.classList.toggle('active', i===idx)); }
      function go(i){ if(animBlocked) return; animBlocked = true; idx = (i + total) % total; slider.style.transform = 'translateX(-'+(idx*100)+'%)'; updateDots(); setTimeout(()=>{ animBlocked=false; }, 450); }

      // prev/next
      if(prevBtn) prevBtn.addEventListener('click', function(e){ e.stopPropagation(); go(idx-1); });
      if(nextBtn) nextBtn.addEventListener('click', function(e){ e.stopPropagation(); go(idx+1); });

      // auto play
      function startAuto(){ stopAuto(); autoT = setInterval(()=> go(idx+1), 3500); }
      function stopAuto(){ if(autoT) { clearInterval(autoT); autoT = null; } }
      startAuto();

      // pause on hover (desktop)
      container.addEventListener('mouseenter', stopAuto);
      container.addEventListener('mouseleave', startAuto);

      // touch support (basic)
      let startX = 0, curX = 0, dragging = false;
      slider.addEventListener('touchstart', function(e){ startX = e.touches[0].clientX; dragging = true; stopAuto(); }, {passive:true});
      slider.addEventListener('touchmove', function(e){ if(!dragging) return; curX = e.touches[0].clientX; const delta = (curX - startX) / container.clientWidth * 100; slider.style.transform = 'translateX(' + ( -idx*100 + delta ) + '%)'; }, {passive:true});
      slider.addEventListener('touchend', function(){ dragging = false; const diff = curX - startX; if(diff > 50) go(idx-1); else if(diff < -50) go(idx+1); else go(idx); startAuto(); });

      // keyboard support
      container.tabIndex = 0;
      container.addEventListener('keydown', function(e){ if(e.key === 'ArrowLeft') go(idx-1); if(e.key === 'ArrowRight') go(idx+1); });

      // make first dot active
      updateDots();
    }catch(e){ console.warn('slider init', e); }
  })();

})();
</script>

</body>
</html>
